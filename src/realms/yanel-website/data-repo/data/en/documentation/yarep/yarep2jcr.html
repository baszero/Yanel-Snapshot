<?xml version="1.0"?><html xmlns="http://www.w3.org/1999/xhtml"><head>  <title>Yarep 2 JCR</title>  <link rel="neutron-introspection" type="application/neutron+xml" href="?yanel.resource.usecase=introspection"/></head><body>  <h1>Yarep 2 JCR</h1><br/>The &quot;From Scratch Realm&quot; contains a sample Yarep2JCR configuration. Please see https://svn.wyona.com/repos/public/yanel/trunk/src/realms/from-scratch-realm-template  <h2>Create (and Drop) DB using PostgreSQL<br/></h2><ul><li>sudo bash<br/></li><li>su - postgres</li><li>vi /etc/postgresql/7.4/main/pg_hba.conf</li><ul><li># TYPE  DATABASE     USER                               IP-ADDRESS    IP-MASK           METHOD<br/>#<br/>local   jackrabbit_test  MY_DB_USERNAME                                                               trust<br/>host    jackrabbit_test  MY_DB_USERNAME       127.0.0.1        255.255.255.255     trust</li></ul><li>exit</li><li>/etc/init.d/postgresql-7.4 restart</li><li>su -postgres</li><li>OPTIONAL: dropdb jackrabbit_test</li><li>createdb --encoding unicode jackrabbit_test</li><li>psql -U MY_DB_USERNAME -d jackrabbit_test</li><li>select * from pg_tables;</li><li>q</li><li>\q</li><li>exit</li><li>exit</li></ul><h2>Migrate data from Yarep VFS repo to Yarep JCR repo</h2>Also see https://svn.wyona.com/repos/public/yarep/trunk/README.txt<ul><li>vi src/test/java/yarep.properties<br/></li><li>./build.sh build-examples</li><li>./build.sh compile-tools</li><li>Make sure that jcr-data-repo-cnode1/repository.xml and jcr-data-repo-cnode2/repository.xml are configured correctly (user of PostgreSQL persistence manager and directory path if Cluster)</li><li>./build.sh copy-repository -Dcopy.src.repo.id=vfs -Dcopy.dest.repo.id=jcr</li><li>psql -U peach -d jackrabbit_test</li><li>select * from default_names;</li></ul><h2>Tomcat Deployment</h2>See https://svn.wyona.com/repos/public/tomcat-cluster re a clustered Tomcat environment<ul><li>Set tomcat1.home.dir and tomcat2.home.dir within src/build/local.build.properties<br/></li><li>./build.sh</li><li>Reconfigure realm within Tomcat1 (build/jakarta-tomcat-5.0.30-cnode1/webapps/yanel/WEB-INF/classes/realms.xml) and Tomcat2 (build/jakarta-tomcat-5.0.30-cnode2/webapps/yanel/WEB-INF/classes/realms.xml) pointing to realm-jcr-cnode1.xml and realm-jcr-cnode2.xml</li><li>./yanel.sh start</li><li>Browse to http://127.0.0.1:8080/yanel/from-scratch-realm/</li></ul> </body>
</html>