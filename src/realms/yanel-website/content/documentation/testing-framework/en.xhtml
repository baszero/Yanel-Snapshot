<?xml version="1.0"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <title>Testing Framework</title>
</head>


<body>
<div class="instructions">
<h1>Testing Framework</h1>
<h3>General information</h3>
There are different kind of tests:
<ul>
<li><b>junit</b>: To test specific functionality of certain java components/classes see <a href="http://junit.org/">http://junit.org/</a></li>
<li><b>htmlunit</b>: To test the web pages (simulating user interaction) see <a href="http://htmlunit.sourceforge.net/">http://htmlunit.sourceforge.net/</a></li>
<li><b>canoo</b>: To test the web pages (simulating user interaction) see <a href="http://webtest.canoo.com/">http://webtest.canoo.com</a></li>
</ul>

<h3>How to run the tests</h3>
<p>
After downloading the Yanel source (either via <a href="../../download/source-repository.html">SVN</a> or as <a href="../download/index.html">snapshot</a>) one can run the tests all at once (as we do it within <a href="http://195.226.6.72:8080">Hudson</a>) or
run the various tests individually.
</p>

<p>
If you want to run all at once (including build and start of Yanel), then execute the shell script
<pre>
./src/build/targets/continuous-integration/reCI 8080 8443 8005 8009 /home/michi/local/canoo-webtest-3.0-R_1758
</pre>
whereas please make sure to have <a href="http://webtest.canoo.com">Canoo webtests</a> installed.
</p>

<p>
If you want to run the tests individually, then it's necessary to build and start yanel before running the tests.
</p>

<p>
<b>IMPORTANT:</b> If you want to run the htmlunit tests, you have to start tomcat and configure
the host and url in
<pre>
$YANEL_HOME/src/test/htmlunit/local.htmlunit-properties.xml
</pre>
</p>

<p>
Then execute in $YANEL_HOME:
<pre>
./build.sh test
</pre>
</p>

<p>
To run single tests standalone:
<pre>
cd $YANEL_HOME
./build.sh -f src/test/build.xml junit -Dtest.class.name=org.wyona.yanel.impl.map.MapImplTest
./build.sh -f src/test/build.xml htmlunit -Dtest.class.name=org.wyona.yanel.htmlunit.yanelwebsite.SimpleWebTest
</pre>
</p>

<p>
To run canoo webtests (including junit and htmlunit):
<pre>
./build.sh test -Dwebtest.home.dir=/usr/local/canoo-webtest-3.0-R_1758 -Dwebtest.config.host=localhost -Dwebtest.config.protocol=http -Dwebtest.config.port=8080 -Dheadless=
</pre>
</p>

<p>
whereas some Canoo web-tests are located at
<pre>
src/realms/use-cases/yanel/src/test/canoo/
src/realms/yanel-website/src/test/canoo/
</pre>
See the README.txt files within these directories in order to run the Canoo web-tests individually.
</p>

<h3>How to write tests</h3>
<p>
Where to place core tests:
<br/>$YANEL_HOME/src/test/junit/
<br/>$YANEL_HOME/src/test/htmlunit/
<br/><br/>Where to place resource tests:
<br/>$YANEL_HOME/src/resources/MYRESOURCE/src/test/junit/
<br/>$YANEL_HOME/src/resources/MYRESOURCE/src/test/htmlunit/
</p>
<p>
Choose the name of the class according to the following convention:
</p>
<p>
*Test.java e.g. MyResourceTest.java for junit tests<br/>
</p>
<p>
*WebTest.java e.g. MyResourceWebTest.java for htmlunit tests<br/>
</p>
<p>
The tests which adhere to these conventions will be executed automatically by
the testing framework.
</p>
<p>
Have a look at the existing tests to see how it works, e.g. in the xml resource.
</p>
<p>
You can find more example htmlunit tests at: <a href="http://svn.wyona.com/repos/public/lenya/htmlunit/">http://svn.wyona.com/repos/public/lenya/htmlunit/</a> (Username:anonymous Password: anonymous).<br/>
</p>

<h3>Misc</h3>
<p>
In the case of Mac OS X (at least Snow Leopard) and Java 1.6 one needs to add xalan-2.7.0.jar to the directory <code>/Library/Java/Extensions</code> (also see <a href="http://blog.jonasbandi.net/2009/06/running-canoo-webtest-30-on-os-x.html">http://blog.jonasbandi.net/2009/06/running-canoo-webtest-30-on-os-x.html</a>).
</p>
</div>
</body>
</html>
