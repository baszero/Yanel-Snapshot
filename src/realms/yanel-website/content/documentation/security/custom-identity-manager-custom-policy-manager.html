<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>CustomIdentityManager / CustomPolicyManager / CustomWebAuthenticator</title>
</head>
<body>
<h1>CustomIdentityManager / CustomPolicyManager / CustomWebAuthenticator</h1>

<p>The default IdentityManager and PolicyManager are part of the org.wyona.security.impl package.</p>

<p>To create a custom IdentityManager you will need to override the IdentityManagerFactoryImpl/IdentityManagerImpl classes from the security package with your own custom versions.</p>

<p>Once you have your custom IdentityManager classes they need to be added to the ac configuration files of your realm, as well as to realm.xml.  Examples for the IdentityManager are shown below.</p>

<hr/>

<h2>CustomIdentityManager</h2>
<p><strong>Override these:</strong></p>
<p>org.wyona.security.impl.IdentityManagerFactoryImpl<br/>
org.wyona.security.impl.IdentityManagerImpl</p>
<p><strong>with these:</strong></p>
<p>com.company.security.impl.IdentityManagerFactoryImpl<br/>
com.company.security.impl.IdentityManagerImpl</p>

<h3>Configuration example (ac-identities-repository.xml)</h3>
<textarea cols="60" name="text" rows="10">
<repository>
  <name>Yanel Access Control Identities</name>

  <paths class="org.wyona.yarep.impl.VFileSystemMapImpl" src="../ac-identities"/>

  <storage class="org.wyona.yarep.core.impl.vfs.VFileSystemStorage">
    <content src="../ac-identities"/>
  </storage>
</repository>
</textarea>

<h3>Configuration example (realm.xml)</h3>
<p>
&lt;ac-identities class="com.company.security.impl.IdentityManagerFactoryImpl">
<br/>
  &lt;com:repository-config xmlns:com="http//www.company.com/wyona/1.0">config/ac-identities-repository.xml&lt;/com:repository-config>
  <br/>
  &lt;com:max-number-of-failed-login-attempts xmlns:com="http//www.company.com/wyona/1.0">3&lt;/com:max-number-of-failed-login-attempts>
  <br/>
&lt;/ac-identities>
</p>

<br/><br/>
<hr/>

<h2>CustomPolicyManager</h2>
<p>Creating a CustomPolicyManager is basically the same as creating a CustomIdentityManager.</p>
<p><strong>Override these:</strong></p>
<p>org.wyona.security.impl.PolicyManagerFactoryImpl<br/>
org.wyona.security.impl.PolicyManagerImpl</p>
<p><strong>with these:</strong></p>
<p>com.company.security.impl.PolicyManagerFactoryImpl<br/>
com.company.security.impl.PolicyManagerImpl</p>

<h3>Configuration example (ac-policies-repository.xml)</h3>
<textarea cols="60" name="text" rows="10">
<repository>
  <name>Company Access Control Policies Repository</name>

  <paths class="org.wyona.yarep.impl.VFileSystemMapImpl" src="../ac-policies"/>

  <storage class="org.wyona.yarep.core.impl.vfs.VFileSystemStorage">
    <content src="../ac-policies"/>
  </storage>
</repository>
</textarea>

<h3>Configuration example (realm.xml)</h3>
<p>
&lt;ac-policies class="com.company.security.impl.PolicyManagerFactoryImpl">
<br/>
  &lt;com:repository-config xmlns:com="http//www.company.com/wyona/1.0">config/ac-policies-repository.xml&lt;/com:repository-config>
  <br/>
  &lt;com:policy-caching-enabled xmlns:com="http://www.company.com/wyona/1.0">false&lt;/com:policy-caching-enabled>
  <br/>
&lt;/ac-policies>
</p>

<br/><br/>
<hr/>

<h2>CustomWebAuthenticator</h2>
<p>The WebAuthenticator is specific to the webapp (or servlet)</p>
<p>In the future there will need to be a logout overwriting functionality</p>
<p><strong>Override this:</strong></p>
<p>org.wyona.yanel.servlet.security.impl.DefaultWebAuthenticatorImpl</p>
<p><strong>with this:</strong></p>
<p>com.company.yanel.servlet.security.impl.CompanyWebAuthenticatorImpl</p>

<h3>Configuration example (realm.xml)</h3>
<p>
&lt;web-authenticator class="com.company.yanel.servlet.security.impl.CompanyWebAuthenticatorImpl">
<br/>
        &lt;com:proxyRedirectURI xmlns:com="http://www.company.com/wyona/1.0">/strongAuth.html&lt;/com:proxyRedirectURI>
<br/>
        &lt;com:welcomeRedirectURI xmlns:com="http://www.company.com/wyona/1.0">/welcome.html&lt;/com:welcomeRedirectURI>
<br/>
        &lt;com:lockedRedirectURI xmlns:com="http://www.company.com/wyona/1.0">/userLocked.html&lt;/com:lockedRedirectURI>
<br/>
        &lt;com:expiredRedirectURI xmlns:com="http://www.company.com/wyona/1.0">/login/expired&lt;/com:expiredRedirectURI>
<br/>
&lt;/web-authenticator>
</p>
</body>
</html>
