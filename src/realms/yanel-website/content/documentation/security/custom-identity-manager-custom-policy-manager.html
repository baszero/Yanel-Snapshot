<html xmlns="http://www.w3.org/1999/xhtml">

<head>

  <title>CustomI dentityManager, custom PolicyManager and custom WebAuthenticator</title>

</head>

<body>
<h1>CustomIdentityManager / CustomPolicyManager / CustomWebAuthenticator</h1>

<p>The default IdentityManager and PolicyManager implementations are part of the org.wyona.security.impl package, for example YarepIdentityManagerImpl and PolicyManagerImplVersion2.</p>

<hr/>

<h2>Custom IdentityManager</h2>

<p>To create a custom IdentityManager you will need to develop your own implementations of the interfaces IdentityManagerFactory and IdentityManager which are part of the org.wyona.security.core package.</p>

<p>Once you have your custom implementations they need to be added to the configuration of your realm (realm.xml). Examples are shown below.</p>

<p><strong>Instead of these:</strong></p>
<p>org.wyona.security.impl.IdentityManagerFactoryImpl<br/>
org.wyona.security.impl.yarep.YarepIdentityManagerImpl</p>
<p><strong>use these:</strong></p>
<p>foo.bar.security.impl.IdentityManagerFactoryImpl<br/>
foo.bar.security.impl.IdentityManagerImpl</p>

<h3>Configuration example: realm.xml</h3>
<p>
<pre>
&lt;ac-identities class=&quot;foo.bar.security.impl.IdentityManagerFactoryImpl&quot;&gt;
  &lt;bar:repository-config xmlns:bar=&quot;http//www.bar.foo/security/1.0&quot;&gt;config/ac-identities-repository.xml&lt;/bar:repository-config&gt;
  &lt;bar:max-number-of-failed-login-attempts xmlns:bar=&quot;http//www.bar.foo/security/1.0&quot;&gt;3&lt;/bar:max-number-of-failed-login-attempts&gt;
&lt;/ac-identities&gt;
</pre>
</p>

<h3>Configuration example: ac-identities-repository.xml</h3>
<p>
<pre>
&lt;repository class=&quot;org.wyona.yarep.impl.repo.vfs.VirtualFileSystemRepository&quot;&gt;
  &lt;name&gt;Yanel Access Control Identities&lt;/name&gt;
  &lt;content src=&quot;../ac-identities&quot;/&gt;
&lt;/repository&gt;
</pre>
</p>

<br/><br/>
<hr/>

<h2>Custom PolicyManager</h2>
<p>Creating a CustomPolicyManager is basically the same as creating a CustomIdentityManager.</p>
<p><strong>Override these:</strong></p>
<p>org.wyona.security.impl.PolicyManagerFactoryImpl<br/>
org.wyona.security.impl.PolicyManagerImpl</p>
<p><strong>with these:</strong></p>
<p>com.company.security.impl.PolicyManagerFactoryImpl<br/>
com.company.security.impl.PolicyManagerImpl</p>

<h3>Configuration example (ac-policies-repository.xml)</h3>
<p>
<pre>
&lt;repository&gt;
  &lt;name&gt;Company Access Control Policies Repository&lt;/name&gt;

  &lt;paths class=&quot;org.wyona.yarep.impl.VFileSystemMapImpl&quot; src=&quot;../ac-policies&quot;/&gt;

  &lt;storage class=&quot;org.wyona.yarep.core.impl.vfs.VFileSystemStorage&quot;&gt;
    &lt;content src=&quot;../ac-policies&quot;/&gt;
  &lt;/storage&gt;
&lt;/repository&gt;
</pre>
</p>

<h3>Configuration example (realm.xml)</h3>
<p>
&lt;ac-policies class=&quot;com.company.security.impl.PolicyManagerFactoryImpl&quot;&gt;
<br/>
  &lt;com:repository-config xmlns:com=&quot;http//www.company.com/wyona/1.0&quot;&gt;config/ac-policies-repository.xml&lt;/com:repository-config&gt;
  <br/>
  &lt;com:policy-caching-enabled xmlns:com=&quot;http://www.company.com/wyona/1.0&quot;&gt;false&lt;/com:policy-caching-enabled&gt;
  <br/>
&lt;/ac-policies&gt;
</p>

<br/><br/>
<hr/>

<h2>Custom WebAuthenticator</h2>
<p>The WebAuthenticator is specific to the webapp (or servlet)</p>
<p>In the future there will need to be a logout overwriting functionality</p>
<p><strong>Override this:</strong></p>
<p>org.wyona.yanel.servlet.security.impl.DefaultWebAuthenticatorImpl</p>
<p><strong>with this:</strong></p>
<p>com.company.yanel.servlet.security.impl.CompanyWebAuthenticatorImpl</p>

<h3>Configuration example (realm.xml)</h3>
<p>
&lt;web-authenticator class=&quot;com.company.yanel.servlet.security.impl.CompanyWebAuthenticatorImpl&quot;&gt;
<br/>
        &lt;com:proxyRedirectURI xmlns:com=&quot;http://www.company.com/wyona/1.0&quot;&gt;/strongAuth.html&lt;/com:proxyRedirectURI&gt;
<br/>
        &lt;com:welcomeRedirectURI xmlns:com=&quot;http://www.company.com/wyona/1.0&quot;&gt;/welcome.html&lt;/com:welcomeRedirectURI&gt;
<br/>
        &lt;com:lockedRedirectURI xmlns:com=&quot;http://www.company.com/wyona/1.0&quot;&gt;/userLocked.html&lt;/com:lockedRedirectURI&gt;
<br/>
        &lt;com:expiredRedirectURI xmlns:com=&quot;http://www.company.com/wyona/1.0&quot;&gt;/login/expired&lt;/com:expiredRedirectURI&gt;
<br/>
&lt;/web-authenticator&gt;
</p>
</body>
</html>
