<?xml version="1.0"?>

<!-- TODO: Generate this build file dynamically -->
<project name="resources">

  <target name="compile-resource" description="Compile Java classes of a specified resource" depends="init, compile-core">
    <property name="resource.home.dir" value="${yanel.home.dir}/src/resources/NULL"/>
    <property name="resource.name" value="NULL"/>

    <property name="resource.classes.dir" value="${resource.home.dir}/build/classes"/>
    <property name="resource.lib.dir" value="${resource.home.dir}/build/lib"/>
    <property name="resource.java.dir" value="${resource.home.dir}/src/java"/>

    <mkdir dir="${resource.classes.dir}"/>
    <javac srcdir="${resource.java.dir}" destdir="${resource.classes.dir}"
      classpathref="classpath.yanel"
      debug="true"
    />
    <mkdir dir="${resource.lib.dir}"/>
    <jar destfile="${resource.lib.dir}/yanel-resource-${resource.name}-0.0.1-dev-r${yanel.revision}.jar"
      basedir="${resource.classes.dir}"
    />
  </target>




  <target name="deploy-resource" description="Deploy JAR of a specified resource" depends="init">
    <property name="resource.home.dir" value="${yanel.home.dir}/src/resources/NULL"/>

    <copy todir="${build.dir}/webapps/${servlet.context.prefix}/WEB-INF/lib">
      <fileset dir="${resource.home.dir}/build/lib"/>
    </copy>
  </target>

  <target name="compile-tape-resource" description="Compile Java classes of tape resource" depends="init">
    <antcall target="compile-resource">
      <param name="resource.home.dir" value="${yanel.home.dir}/src/resources/tape"/>
      <param name="resource.name" value="tape"/>
    </antcall>
  </target>

  <target name="compile-websearch-resource" description="Compile Java classes of websearch resource" depends="init">
    <antcall target="compile-resource">
      <param name="resource.home.dir" value="${yanel.home.dir}/src/resources/websearch"/>
      <param name="resource.name" value="websearch"/>
    </antcall>
  </target>

  <target name="compile-file-resource" description="Compile Java classes of file resource" depends="init">
    <antcall target="compile-resource">
      <param name="resource.home.dir" value="${yanel.home.dir}/src/resources/file"/>
      <param name="resource.name" value="file"/>
    </antcall>
  </target>

  <target name="compile-invoice-resource" description="Compile Java classes of invoice resource" depends="init">
    <antcall target="compile-resource">
      <param name="resource.home.dir" value="${yanel.home.dir}/src/resources/invoice"/>
      <param name="resource.name" value="invoice"/>
    </antcall>
  </target>

  <target name="compile-directory-resource" description="Compile Java classes of Directory resource" depends="init">
    <antcall target="compile-resource">
      <param name="resource.home.dir" value="${yanel.home.dir}/src/resources/directory"/>
      <param name="resource.name" value="directory"/>
    </antcall>
  </target>

  <target name="compile-atom-resource" description="Compile Java classes of atom resource" depends="init">
    <antcall target="compile-resource">
      <param name="resource.home.dir" value="${yanel.home.dir}/src/contributions/resources/atom"/>
      <param name="resource.name" value="atom"/>
    </antcall>
  </target>

  <target name="compile-odt-resource" description="Compile Java classes of ODT resource" depends="init">
    <antcall target="compile-resource">
      <param name="resource.home.dir" value="${yanel.home.dir}/src/resources/odt"/>
      <param name="resource.name" value="odt"/>
    </antcall>
  </target>

  <target name="compile-xml-resource" description="Compile Java classes of XML resource" depends="init">
    <antcall target="compile-resource">
      <param name="resource.home.dir" value="${yanel.home.dir}/src/resources/xml"/>
      <param name="resource.name" value="xml"/>
    </antcall>
  </target>

  <target name="deploy-resources" description="Deploy resources" depends="init">
    <antcall target="deploy-resource">
      <param name="resource.home.dir" value="${yanel.home.dir}/src/resources/file"/>
    </antcall>
    <antcall target="deploy-resource">
      <param name="resource.home.dir" value="${yanel.home.dir}/src/resources/directory"/>
    </antcall>
    <antcall target="deploy-resource">
      <param name="resource.home.dir" value="${yanel.home.dir}/src/contributions/resources/atom"/>
    </antcall>
    <antcall target="deploy-resource">
      <param name="resource.home.dir" value="${yanel.home.dir}/src/resources/websearch"/>
    </antcall>
    <antcall target="deploy-resource">
      <param name="resource.home.dir" value="${yanel.home.dir}/src/resources/odt"/>
    </antcall>
    <antcall target="deploy-resource">
      <param name="resource.home.dir" value="${yanel.home.dir}/src/resources/xml"/>
    </antcall>
    <antcall target="deploy-resource">
      <param name="resource.home.dir" value="${yanel.home.dir}/src/resources/tape"/>
    </antcall>
    <antcall target="deploy-resource">
      <param name="resource.home.dir" value="${yanel.home.dir}/src/resources/invoice"/>
    </antcall>
  </target>

  <target name="clean-resources" description="Clean build of resources" depends="init">
    <delete dir="${yanel.home.dir}/src/resources/invoice/build"/>
    <delete dir="${yanel.home.dir}/src/resources/websearch/build"/>
    <delete dir="${yanel.home.dir}/src/resources/odt/build"/>
    <delete dir="${yanel.home.dir}/src/resources/xml/build"/>
    <delete dir="${yanel.home.dir}/src/resources/file/build"/>
    <delete dir="${yanel.home.dir}/src/resources/directory/build"/>
    <delete dir="${yanel.home.dir}/src/contributions/resources/atom/build"/>
    <delete dir="${yanel.home.dir}/src/resources/tape/build"/>
  </target>

  <target name="compile-resources" description="Compile resources" depends="init">
    <antcall target="compile-invoice-resource"/>
    <antcall target="compile-websearch-resource"/>
    <antcall target="compile-odt-resource"/>
    <antcall target="compile-xml-resource"/>
    <antcall target="compile-file-resource"/>
    <antcall target="compile-directory-resource"/>
    <antcall target="compile-atom-resource"/>
    <antcall target="compile-tape-resource"/>
  </target>

</project>
